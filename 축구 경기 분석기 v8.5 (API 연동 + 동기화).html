<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶•êµ¬ ê²½ê¸° ë¶„ì„ê¸° v8.5 (API ì—°ë™)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€) */
        /* ê¸°ë³¸ í°íŠ¸ ì„¤ì • */
        body {
            font-family: 'Inter', 'Pretendard', sans-serif;
            background-color: #f4f7f6; /* Slightly lighter gray */
        }
        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .tab-link {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            padding: 0.5rem 1rem; /* Adjust padding */
            margin-bottom: -1px; /* Overlap border */
            cursor: pointer;
        }
        .tab-link.active {
            border-bottom-color: #3b82f6; /* blue-500 */
            color: #3b82f6;
            font-weight: 600;
        }
        .tab-content {
            display: none;
            padding-top: 1.5rem; /* Add padding above content */
        }
        .tab-content.active {
            display: block;
        }
        /* í¼ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .form-icon {
            display: inline-block;
            width: 1.25rem; /* 20px */
            height: 1.25rem; /* 20px */
            line-height: 1.25rem; /* 20px */
            text-align: center;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.75em; /* Smaller font size */
            color: white;
            margin: 0 1px;
            vertical-align: middle; /* Align icons vertically */
        }
        .W { background-color: #2ecc71; } /* Emerald */
        .D { background-color: #f1c40f; } /* Sunflower */
        .L { background-color: #e74c3c; } /* Alizarin */
        .N { background-color: #95a5a6; } /* Concrete */
        /* ì˜ˆì¸¡ ê²°ê³¼ í•˜ì´ë¼ì´íŠ¸ */
        .correct-prediction {
            background-color: #d1fae5 !important; /* green-100å¼ºåˆ¶ */
            color: #065f46 !important; /* green-800å¼ºåˆ¶ */
            font-weight: 600;
        }
        .incorrect-prediction {
            background-color: #fee2e2 !important; /* red-100å¼ºåˆ¶ */
            color: #991b1b !important; /* red-800å¼ºåˆ¶ */
            opacity: 0.8; /* Slightly faded */
        }
        .second-lowest-osl {
            background-color: #e0f2fe !important; /* light-blue-100å¼ºåˆ¶ */
            font-weight: bold;
        }
        /* PPG íŠ¸ë Œë“œ */
        .ppg-trend { font-size: 0.9em; margin-left: 4px; }
        .ppg-up { color: #27ae60; } /* Nephritis */
        .ppg-down { color: #c0392b; } /* Pomegranate */
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6); /* Darker overlay */
            transition: opacity 0.3s ease;
        }
        .modal-content {
            background-color: #ffffff;
            margin: 10% auto; /* Adjusted margin */
            padding: 2rem;
            border-radius: 0.5rem; /* 8px */
            max-width: 400px; /* Smaller modal */
            width: 90%;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .modal-close {
            position: absolute;
            top: 0.75rem; /* 12px */
            right: 1rem; /* 16px */
            font-size: 1.75rem; /* Larger close icon */
            font-weight: bold;
            color: #9ca3af; /* gray-400 */
            cursor: pointer;
            line-height: 1;
        }
        .modal-close:hover {
            color: #1f2937; /* gray-800 */
        }
        /* ë©”ì‹œì§€ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        #message-box, #backtest-message-box { /* Added backtest-message-box */
            display: none;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.375rem; /* 6px */
            font-weight: 500;
            border-width: 1px;
            border-style: solid;
        }
        #message-box.error, #backtest-message-box.error { background-color: #fee2e2; color: #b91c1c; border-color: #fca5a5; }
        #message-box.warning, #backtest-message-box.warning { background-color: #fef3c7; color: #b45309; border-color: #fcd34d; }
        #message-box.success, #backtest-message-box.success { background-color: #d1fae5; color: #065f46; border-color: #6ee7b7; }
        #message-box.info, #backtest-message-box.info { background-color: #dbeafe; color: #1e40af; border-color: #93c5fd; } /* Added info style */
        /* ë°˜ì‘í˜• í…Œì´ë¸” ìŠ¤íƒ€ì¼ (ëª¨ë°”ì¼ìš©) */
        @media screen and (max-width: 768px) {
            .results-container table thead {
                display: none;
            }
            .results-container table tr {
                display: block;
                margin-bottom: 1rem; /* Increased spacing */
                border: 1px solid #e5e7eb; /* gray-200 */
                border-radius: 0.375rem; /* 6px */
                box-shadow: 0 1px 3px rgba(0,0,0,0.05);
                background-color: white; /* Ensure background */
            }
            .results-container table td {
                display: block;
                text-align: right;
                padding-left: 55%; /* More space for label */
                position: relative;
                border-bottom: 1px solid #f3f4f6; /* gray-100 */
                padding-top: 0.75rem; /* 12px */
                padding-bottom: 0.75rem; /* 12px */
            }
            .results-container table td:last-child {
                border-bottom: 0;
            }
            .results-container table td::before {
                content: attr(data-label);
                position: absolute;
                left: 0.75rem; /* 12px */
                width: 45%;
                padding-right: 0.75rem; /* 12px */
                text-align: left;
                font-weight: 600; /* Bolder label */
                color: #4b5563; /* gray-600 */
                font-size: 0.8em; /* Smaller label */
            }
            /* Adjust first cell (ê´€ë¦¬) on mobile */
            .results-container table td[data-label="ê´€ë¦¬"] {
                 padding-left: 0.75rem; /* Reset padding for first cell */
                 text-align: left;
            }
             .results-container table td[data-label="ê´€ë¦¬"]::before {
                 display: none; /* Hide label for first cell */
            }
            /* --- ìˆ˜ì • ---: ì‹œë„ˆì§€ í…Œì´ë¸” ëª¨ë°”ì¼ ë·° */
            #accuracy-analysis-container table thead {
                display: none;
            }
            #accuracy-analysis-container table tr {
                display: block;
                margin-bottom: 1rem;
                border: 1px solid #e5e7eb;
                border-radius: 0.375rem;
                box-shadow: 0 1px 3px rgba(0,0,0,0.05);
                background-color: white;
            }
            #accuracy-analysis-container table td {
                display: block;
                text-align: right;
                padding-left: 40%; /* Adjust padding */
                position: relative;
                border-bottom: 1px solid #f3f4f6;
                padding-top: 0.75rem;
                padding-bottom: 0.75rem;
            }
            #accuracy-analysis-container table td:first-child {
                font-weight: bold;
                background-color: #f9fafb; /* gray-50 */
                padding-left: 0.75rem;
                text-align: left;
            }
            #accuracy-analysis-container table td:first-child::before {
                display: none;
            }
            #accuracy-analysis-container table td::before {
                content: attr(data-label); /* JSì—ì„œ data-labelì„ ì¶”ê°€í•´ì•¼ í•¨ */
                position: absolute;
                left: 0.75rem;
                width: 35%; /* Adjust width */
                padding-right: 0.75rem;
                text-align: left;
                font-weight: 600;
                color: #4b5563;
                font-size: 0.8em;
            }
        }
        /* ì‹œë„ˆì§€ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .diagonal-cell {
            background-color: #f3f4f6; /* gray-100 */
            font-weight: bold;
            color: #1f2937; /* gray-800 */
        }
        .high-synergy {
            background-color: #d1fae5; /* green-100 */
            color: #065f46; /* green-800 */
            font-weight: bold;
        }
        .low-synergy {
            background-color: #fee2e2; /* red-100 */
            color: #991b1b; /* red-800 */
        }
        /* ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .primary-btn { @apply bg-blue-600 text-white py-2 px-4 rounded-md font-semibold shadow-md hover:bg-blue-700 transition duration-300; }
        .secondary-btn { @apply bg-gray-500 text-white py-2 px-4 rounded-md font-semibold shadow-md hover:bg-gray-600 transition duration-300; }
        .success-btn { @apply bg-green-600 text-white py-2 px-4 rounded-md shadow hover:bg-green-700 transition duration-300; }
        .warning-btn { @apply bg-yellow-500 text-white py-2 px-6 rounded-md shadow hover:bg-yellow-600 transition font-semibold; }
        .danger-btn { @apply bg-red-600 text-white py-2 px-6 rounded-md shadow hover:bg-red-700 transition font-semibold; }
        .purple-btn { @apply bg-purple-600 text-white py-2 px-4 rounded-md shadow hover:bg-purple-700 transition; }
        .indigo-btn { @apply bg-indigo-500 text-white py-2 px-4 rounded-md shadow hover:bg-indigo-600 transition text-sm; }
        /* ========== ë™ê¸°í™” íŒ¨ë„ ìŠ¤íƒ€ì¼ (NEW) ========== */
        .sync-control-panel {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: 20px; margin: 20px 0; border-radius: 12px;
            border: 2px solid #0ea5e9; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .sync-control-panel h3 { margin-top: 0; color: #0369a1; font-weight: 700; margin-bottom: 15px; }
        .sync-button-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        @media (max-width: 768px) { .sync-button-grid { grid-template-columns: 1fr; } }
        .sync-button { padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; color: white; transition: all 0.3s ease; font-size: 14px; }
        .sync-button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); }
        .sync-button:disabled { opacity: 0.6; cursor: not-allowed; }
        .btn-download { background: #10b981; } .btn-download:hover { background: #059669; }
        .btn-upload { background: #f59e0b; } .btn-upload:hover { background: #d97706; }
        .btn-sync { background: #0ea5e9; } .btn-sync:hover { background: #0284c7; }
        .btn-auto-sync { background: #8b5cf6; } .btn-auto-sync:hover { background: #7c3aed; }
        .sync-status-log { padding: 12px; background: white; border-radius: 6px; border: 1px solid #0ea5e9; font-family: 'Courier New', monospace; font-size: 12px; max-height: 150px; overflow-y: auto; color: #0369a1; }
        .sync-status-log div { margin-top: 4px; padding: 2px 0; }
        .sync-log-success { color: #059669; } .sync-log-error { color: #dc2626; } .sync-log-info { color: #0284c7; } .sync-log-warning { color: #b45309; }
        /* í…Œì´ë¸” ì…€ ë‚´ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .delete-row-btn, .enter-result-btn {
            padding: 4px 8px;
            font-size: 0.8em;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 5px;
            border: none;
            color: white;
            transition: background-color 0.2s ease;
        }
        .delete-row-btn { background-color: #e74c3c; /* Alizarin */ }
        .delete-row-btn:hover { background-color: #c0392b; /* Pomegranate */ }
        .enter-result-btn { background-color: #9b59b6; /* Amethyst */ }
        .enter-result-btn:hover { background-color: #8e44ad; /* Wisteria */ }
        /* ì¢…í•© ì˜ˆì¸¡ ì…€ ì´ìœ  í…ìŠ¤íŠ¸ */
        .consensus-reasoning {
            display: block;
            font-size: 0.75em; /* Smaller font */
            color: #6b7280; /* gray-500 */
            font-weight: 400;
            margin-top: 4px;
            line-height: 1.2;
        }
        /* ìŠ¤í”¼ë„ˆ ìŠ¤íƒ€ì¼ */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border-left-color: #09f;
            animation: spin 1s ease infinite;
            display: inline-block; /* Changed from none */
            margin-left: 10px;
            vertical-align: middle;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* [ì‹ ê·œ] ë¡œë”© ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 100;
            transition: opacity 0.5s ease;
            opacity: 1;
        }
        #main-content {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 md:p-8">

    <div id="loading-overlay">
        <div class="spinner w-12 h-12 !border-4 !border-l-blue-600"></div>
        <p class="text-lg font-semibold text-blue-600 mt-4">Football Data APIë¡œë¶€í„° ë¦¬ê·¸ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘...</p>
        <p class="text-sm text-gray-500 mt-2">API ì‘ë‹µ ì‹œê°„ì— ë”°ë¼ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (TIER_ONE ë¦¬ê·¸ë§Œ ë¡œë“œ)</p>
    </div>

    <div id="main-content" class="container mx-auto max-w-screen-2xl bg-white p-6 rounded-lg shadow-lg">

        <header class="mb-6 pb-4 border-b border-gray-200">
            <h1 class="text-3xl font-bold text-gray-900">ì¶•êµ¬ ê²½ê¸° ë¶„ì„ê¸° (v8.5 - API ì—°ë™)</h1>
            <p class="text-gray-600">ë°ì´í„° ê¸°ë°˜ ê²½ê¸° ì˜ˆì¸¡ ë° ë¶„ì„ ë„êµ¬</p>
        </header>

        <div id="message-box"></div>

        <!-- ğŸ”„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë™ê¸°í™” ì»¨íŠ¸ë¡¤ (NEW) -->
        <section class="sync-control-panel">
            <h3>ğŸ”„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë™ê¸°í™” (ë°ì´í„° ìë™ ê³µìœ )</h3>
            
            <div class="sync-button-grid">
                <button id="btn-download-json" class="sync-button btn-download">
                    ğŸ“¥ í•™ìŠµ ë°ì´í„° ë‹¤ìš´ë¡œë“œ (.JSON)
                </button>
                <button id="btn-upload-json" class="sync-button btn-upload">
                    ğŸ“¤ í•™ìŠµ ë°ì´í„° ì—…ë¡œë“œ (.JSON)
                </button>
            </div>
            
            <div class="sync-button-grid">
                <button id="btn-sync-server" class="sync-button btn-sync">
                    ğŸ”— ì„œë²„ ë™ê¸°í™” (ì§€ê¸ˆ ë°”ë¡œ)
                </button>
                <button id="btn-auto-sync" class="sync-button btn-auto-sync">
                    â° ìë™ ë™ê¸°í™” ì‹œì‘ (5ë¶„ë§ˆë‹¤)
                </button>
            </div>
            
            <div class="sync-status-log">
                <div style="color: #0369a1; font-weight: bold;">ğŸ“Š ë™ê¸°í™” ìƒíƒœ</div>
                <div id="sync-status">ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ</div>
            </div>
        </section>

        <section id="input-section" class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">ê²½ê¸° ì •ë³´ ì…ë ¥</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="space-y-4">
                    <div>
                        <label for="league-select" class="block text-sm font-medium text-gray-700 mb-1">ë¦¬ê·¸ ì„ íƒ <span class="text-xs text-red-600">(K1, K2 í¬í•¨)</span></label>
                        <select id="league-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white">
                             <option value="" disabled selected>APIì—ì„œ ë¦¬ê·¸ ë¡œë”© ì¤‘...</option>
                        </select>
                    </div>
                    <div>
                        <label for="home-team-select" class="block text-sm font-medium text-gray-700 mb-1">í™ˆ íŒ€</label>
                        <select id="home-team-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white">
                             <option value="" disabled selected>íŒ€ ë¡œë”© ëŒ€ê¸°</option>
                        </select>
                        <input type="text" id="home-team-input" placeholder="í™ˆ íŒ€ ì´ë¦„ ì§ì ‘ ì…ë ¥" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 hidden bg-white">
                    </div>
                    <div>
                        <label for="away-team-select" class="block text-sm font-medium text-gray-700 mb-1">ì›ì • íŒ€</label>
                        <select id="away-team-select" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white">
                             <option value="" disabled selected>íŒ€ ë¡œë”© ëŒ€ê¸°</option>
                        </select>
                        <input type="text" id="away-team-input" placeholder="ì›ì • íŒ€ ì´ë¦„ ì§ì ‘ ì…ë ¥" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 hidden bg-white">
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="home-ppg" class="block text-sm font-medium text-gray-700 mb-1">í™ˆíŒ€ PPG</label>
                            <input type="number" id="home-ppg" step="0.01" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: 1.50">
                        </div>
                        <div>
                            <label for="away-ppg" class="block text-sm font-medium text-gray-700 mb-1">ì›ì •íŒ€ PPG</label>
                            <input type="number" id="away-ppg" step="0.01" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: 1.20">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="home-elo" class="block text-sm font-medium text-gray-700 mb-1">í™ˆíŒ€ ELO</label>
                            <input type="number" id="home-elo" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: 1800">
                        </div>
                        <div>
                            <label for="away-elo" class="block text-sm font-medium text-gray-700 mb-1">ì›ì •íŒ€ ELO</label>
                            <input type="number" id="away-elo" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: 1750">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="home-form" class="block text-sm font-medium text-gray-700 mb-1">í™ˆíŒ€ ìµœê·¼ í¼ (5)</label>
                            <input type="text" id="home-form" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: WDWLD">
                        </div>
                        <div>
                            <label for="away-form" class="block text-sm font-medium text-gray-700 mb-1">ì›ì •íŒ€ ìµœê·¼ í¼ (5)</label>
                            <input type="text" id="away-form" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: LLDWW">
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label for="home-odds" class="block text-sm font-medium text-gray-700 mb-1">í™ˆ ìŠ¹</label>
                            <input type="number" id="home-odds" step="0.01" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: 2.50">
                        </div>
                        <div>
                            <label for="draw-odds" class="block text-sm font-medium text-gray-700 mb-1">ë¬´ìŠ¹ë¶€</label>
                            <input type="number" id="draw-odds" step="0.01" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: 3.30">
                        </div>
                        <div>
                            <label for="away-odds" class="block text-sm font-medium text-gray-700 mb-1">ì›ì • ìŠ¹</label>
                            <input type="number" id="away-odds" step="0.01" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" placeholder="ì˜ˆ: 2.80">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 pt-6">
                        <button id="add-result" class="primary-btn bg-blue-600 text-white py-2 px-4 rounded-md font-semibold shadow-md hover:bg-blue-700 transition duration-300">
                            ë¶„ì„ ì¶”ê°€
                        </button>
                        <button id="clear-inputs" class="secondary-btn bg-gray-500 text-white py-2 px-4 rounded-md font-semibold shadow-md hover:bg-gray-600 transition duration-300">
                            ë°°ë‹¹ë¥  ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>
            </div>
            <div id="team-brier-score-display" class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-md text-blue-800 text-sm">
                <p>íŒ€ì„ ì„ íƒí•˜ë©´ ìµœê·¼ ë§ëŒ€ê²° ë˜ëŠ” ê° íŒ€ì˜ ìµœê·¼ ê²½ê¸° ë¸Œë¼ì´ì–´ ì ìˆ˜ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.</p>
            </div>
        </section>

        <section id="summary-section" class="mb-6">
            <div id="summary-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                </div>
        </section>

        <div class="tabs-container mb-4 border-b border-gray-200 flex flex-wrap">
            <button class="tab-link active" onclick="openTab(event, 'main-analysis')">ì¢…í•© ë¶„ì„</button>
            <button class="tab-link" onclick="openTab(event, 'auto-analysis')">ìë™ ë¶„ì„ & ëª¨ë¸ ì„±ëŠ¥</button>
            <button class="tab-link" onclick="openTab(event, 'recommended-picks')">ì¶”ì²œ ì˜ˆì¸¡</button>
        </div>

        <div class="tab-content-container">

            <div id="main-analysis" class="tab-content active">
                <div class="flex justify-between items-center mb-4 flex-wrap gap-2">
                    <h2 class="text-xl font-semibold text-gray-700">ë¶„ì„ ê²°ê³¼</h2>
                    <div>
                        <button id="sort-by-score-btn" class="indigo-btn">
                            í•µì‹¬ ì ìˆ˜ ì •ë ¬
                        </button>
                        <button id="save-results-btn" class="success-btn ml-2">
                            ë¦¬í¬íŠ¸ ìƒì„± (ì„ íƒ/ì „ì²´)
                        </button>
                    </div>
                </div>

                <div class="results-container overflow-x-auto rounded-lg border border-gray-200">
                    <table class="min-w-full w-full bg-white text-xs text-left text-gray-500">
                        <thead class="bg-gray-100 text-xs text-gray-700 uppercase">
                            <tr>
                                <th scope="col" class="py-3 px-4 w-20">
                                    <label for="select-all-checkbox" class="flex items-center space-x-2">
                                        <input type="checkbox" id="select-all-checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                        <span>ê´€ë¦¬</span>
                                    </label>
                                </th>
                                <th scope="col" class="py-3 px-4 min-w-[180px]">ê²½ê¸° (ELO)</th>
                                <th scope="col" class="py-3 px-4 min-w-[120px]">ìµœê·¼ í¼</th>
                                <th scope="col" class="py-3 px-4">ì´ë³€ ì§€ìˆ˜</th>
                                <th scope="col" class="py-3 px-4">OSL í•µì‹¬ì ìˆ˜</th>
                                <th scope="col" class="py-3 px-4">BT ëª¨ë¸</th>
                                <th scope="col" class="py-3 px-4">íšŒê·€ ëª¨ë¸</th>
                                <th scope="col" class="py-3 px-4">í¼ì§€ íšŒê·€</th>
                                <th scope="col" class="py-3 px-4 min-w-[150px]">ì¢…í•© ì˜ˆì¸¡</th>
                                <th scope="col" class="py-3 px-4 min-w-[110px]">í•¸ë””ìº¡ ì˜ˆì¸¡</th>
                                <th scope="col" class="py-3 px-4">HPL xG-í‘¸ì•„ì†¡</th>
                                <th scope="col" class="py-3 px-4">O/U 2.5 (xG)</th>
                                <th scope="col" class="py-3 px-4">BTTS (xG)</th>
                                <th scope="col" class="py-3 px-4">í™ˆ OSL</th>
                                <th scope="col" class="py-3 px-4">ë¬´ OSL</th>
                                <th scope="col" class="py-3 px-4">ì› OSL</th>
                                <th scope="col" class="py-3 px-4">ê²°ê³¼</th>
                            </tr>
                        </thead>
                        <tbody id="results-body" class="divide-y divide-gray-200">
                            </tbody>
                    </table>
                </div>

                <div id="accuracy-analysis-container" class="mt-8">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">ëª¨ë¸ ìƒí˜¸ ì ì¤‘ë¥  ë¶„ì„ (ì§ì ‘ ì¶”ê°€ëœ ê²½ê¸°ë§Œ)</h2>
                    <div class="overflow-x-auto rounded-lg border border-gray-200">
                        <table id="synergy-table" class="min-w-full w-full bg-white text-sm text-center">
                            <thead class="bg-gray-100 text-xs text-gray-700 uppercase">
                                <tr id="synergy-header-row">
                                    </tr>
                            </thead>
                            <tbody id="synergy-body" class="divide-y divide-gray-200">
                                </tbody>
                        </table>
                    </div>
                    <div class="mt-4 text-xs text-gray-600 space-y-1">
                        <p>* ì´ í‘œëŠ” <strong>"ê¸°ì¤€ ëª¨ë¸ (í–‰)ì´ ì‹¤ì œ ê²°ê³¼ë¥¼ ë§í˜”ì„ ë•Œ, ë¹„êµ ëª¨ë¸ (ì—´)ë„ ë§í˜”ì„ í™•ë¥ "</strong>ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
                        <p><span class="inline-block w-3 h-3 bg-green-100 border mr-1"></span>: 90% ì´ìƒ ì¼ì¹˜ (ë†’ì€ ì‹œë„ˆì§€)</p>
                        <p><span class="inline-block w-3 h-3 bg-red-100 border mr-1"></span>: 80% ë¯¸ë§Œ ì¼ì¹˜ (ë‚®ì€ ì‹œë„ˆì§€)</p>
                    </div>
                </div>

            </div>

            <div id="auto-analysis" class="tab-content">
			
			<div class="my-4 p-4 bg-gray-100 rounded border">
                <h3 class="text-lg font-semibold mb-2">ğŸ§  ë¯¸ì ì¤‘ íŒ¨í„´ í•™ìŠµ</h3>
                <p class="text-sm text-gray-600 mb-3">
                    ë©”ì¸ í…Œì´ë¸”ì˜ ëª¨ë“  ê²½ê¸°(ë°±í…ŒìŠ¤íŒ…+ìˆ˜ë™)ë¥¼ ë¶„ì„í•˜ì—¬ ìœ„í—˜ íŒ¨í„´ DBë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.<br>
                    ë°ì´í„°ê°€ ë§ì„ìˆ˜ë¡ ì •í™•ë„ê°€ í–¥ìƒë©ë‹ˆë‹¤. (í˜„ì¬ 630+ ê²½ê¸°)
                </p>
                <button id="build-pattern-db-btn" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md font-semibold shadow-md hover:bg-blue-700">
                    ğŸ“ˆ íŒ¨í„´ DB êµ¬ì¶• ë° ì—…ë°ì´íŠ¸ (ì „ì²´ ê²½ê¸° í•™ìŠµ)
                </button>
            </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-1 p-4 bg-gray-50 rounded-lg border border-gray-200 flex flex-col">
                        <h2 class="text-xl font-semibold mb-4 text-gray-700">ë°±í…ŒìŠ¤íŒ… ê²½ê¸° ëª©ë¡</h2>
                        <div id="backtest-message-box"></div> <div class="mb-4 flex-shrink-0">
                            <label for="backtest-league-select" class="block text-sm font-medium text-gray-700 mb-1">ë¦¬ê·¸ ì„ íƒ <span class="text-xs text-red-600">(K1, K2 í¬í•¨)</span></label>
                            <div class="flex items-center space-x-2">
                                <select id="backtest-league-select" class="flex-grow p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white">
                                    <option value="" disabled selected>ë¦¬ê·¸ ì„ íƒ (API ë¡œë“œ í›„)</option>
                                </select>
                                <label for="backtest-all-checkbox" class="flex items-center text-sm text-gray-700 whitespace-nowrap">
                                    <input type="checkbox" id="backtest-all-checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-1">
                                    ì „ì²´ ì‹¤í–‰
                                </label>
                                <div id="backtest-spinner" class="spinner" style="display: none;"></div> </div>
                        </div>

                        <div id="fixture-list" class="text-sm space-y-2">
                            <p style="text-align: center; color: #888;">ìƒë‹¨ì—ì„œ ë¦¬ê·¸ë¥¼ ì„ íƒí•˜ë©´ ê²½ê¸° ëª©ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
                        </div>
                    </div>

                    <div class="md:col-span-2 space-y-6">
                        <div id="model-performance-summary" class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <h4>ğŸ¤– HPL xG-í‘¸ì•„ì†¡ ëª¨ë¸ ì„±ëŠ¥</h4>
                            <p><strong>ë¸Œë¼ì´ì–´ ì ìˆ˜ (Brier Score):</strong> N/A (ê²°ê³¼ ì…ë ¥ í•„ìš”)</p>
                            <p style="font-size: 0.85em; color: #555;">* ë¸Œë¼ì´ì–´ ì ìˆ˜ëŠ” ì˜ˆì¸¡ í™•ë¥ ì˜ ì •í™•ë„ë¥¼ ë‚˜íƒ€ë‚´ë©°, 0ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì¢‹ìŠµë‹ˆë‹¤. (ë¬´ì‘ìœ„ ì˜ˆì¸¡ ê¸°ì¤€: ~0.67)</p>
                        </div>
                        <div id="fuzzy-training-status" class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                            <h4>ğŸ§  í¼ì§€ íšŒê·€ ëª¨ë¸ ìƒíƒœ</h4>
                            <p>ëª¨ë¸ì„ í›ˆë ¨í•˜ëŠ” ì¤‘...</p>
                        </div>
                        <div class="flex flex-wrap gap-4">
                            <button id="retrain-fuzzy-btn" class="purple-btn">
                                í˜„ì¬ ë°ì´í„°ë¡œ í¼ì§€ ëª¨ë¸ ì¬í›ˆë ¨
                            </button>
                            <button id="export-data-btn" class="secondary-btn">
                                í•™ìŠµ ë°ì´í„° ë‹¤ìš´ë¡œë“œ (.json)
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <div id="recommended-picks" class="tab-content">
                <div class="flex justify-center items-center mb-6 gap-4">
                    <button id="recommend-home-win" class="primary-btn">
                        í™ˆ ìŠ¹ ì¶”ì²œ
                    </button>
                    <button id="recommend-draw" class="warning-btn">
                        ë¬´ìŠ¹ë¶€ ì¶”ì²œ
                    </button>
                    <button id="recommend-away-win" class="danger-btn">
                        ì›ì • ìŠ¹ ì¶”ì²œ
                    </button>
                </div>
                <div class="results-container overflow-x-auto rounded-lg border border-gray-200">
                    <table class="min-w-full w-full bg-white text-xs text-left text-gray-500">
                        <thead class="bg-gray-100 text-xs text-gray-700 uppercase">
                            <tr>
                                <th scope="col" class="py-3 px-4">ê´€ë¦¬</th>
                                <th scope="col" class="py-3 px-4 min-w-[180px]">ê²½ê¸° (ELO)</th>
                                <th scope="col" class="py-3 px-4 min-w-[120px]">ìµœê·¼ í¼</th>
                                <th scope="col" class="py-3 px-4">ì´ë³€ ì§€ìˆ˜</th>
                                <th scope="col" class="py-3 px-4">OSL í•µì‹¬ì ìˆ˜</th>
                                <th scope="col" class="py-3 px-4">BT ëª¨ë¸</th>
                                <th scope="col" "py-3 px-4">íšŒê·€ ëª¨ë¸</th>
                                <th scope="col" class="py-3 px-4">í¼ì§€ íšŒê·€</th>
                                <th scope="col" class="py-3 px-4 min-w-[150px]">ì¢…í•© ì˜ˆì¸¡</th>
                                <th scope="col" class="py-3 px-4 min-w-[110px]">í•¸ë””ìº¡ ì˜ˆì¸¡</th>
                                <th scope="col" class="py-3 px-4">HPL xG-í‘¸ì•„ì†¡</th>
                                <th scope="col" class="py-3 px-4">O/U 2.5 (xG)</th>
                                <th scope="col" class="py-3 px-4">BTTS (xG)</th>
                                <th scope="col" class="py-3 px-4">í™ˆ OSL</th>
                                <th scope="col" class="py-3 px-4">ë¬´ OSL</th>
                                <th scope="col" class="py-3 px-4">ì› OSL</th>
                                <th scope="col" class="py-3 px-4">ê²°ê³¼</th>
                            </tr>
                        </thead>
                        <tbody id="recommended-picks-body" class="divide-y divide-gray-200">
                             <tr><td colspan="17" style="text-align:center;padding:20px;">ì¶”ì²œí•  ì˜ˆì¸¡ ìœ í˜• (í™ˆ ìŠ¹/ë¬´ìŠ¹ë¶€/ì›ì • ìŠ¹)ì„ ì„ íƒí•˜ì„¸ìš”.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div> </div> <div id="resultModal" class="modal">
        <div class="modal-content shadow-xl">
            <span id="close-result-modal" class="modal-close">&times;</span>
            <h3 class="text-xl font-semibold mb-4 text-gray-700">ê²½ê¸° ê²°ê³¼ ì…ë ¥</h3>
            <form id="result-form" class="space-y-4">
                <div class="flex items-center space-x-4">
                    <div class="flex-1">
                        <label for="home-score" class="block text-sm font-medium text-gray-700 mb-1">í™ˆ íŒ€ ì ìˆ˜</label>
                        <input type="number" id="home-score" min="0" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" required>
                    </div>
                    <span class="text-gray-600 font-bold text-lg mt-6">-</span>
                    <div class="flex-1">
                        <label for="away-score" class="block text-sm font-medium text-gray-700 mb-1">ì›ì • íŒ€ ì ìˆ˜</label>
                        <input type="number" id="away-score" min="0" class="w-full p-2 border border-gray-300 rounded-md shadow-sm bg-white" required>
                    </div>
                </div>
                <button type="submit" class="w-full purple-btn">
                    ê²°ê³¼ ì €ì¥
                </button>
            </form>
        </div>
    </div>

    <!-- âœ… ì˜¬ë°”ë¥¸ ìˆœì„œì˜ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    
    <!-- 1ï¸âƒ£ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ (ì œì¼ ë¨¼ì €) -->
    <script src="https://unpkg.com/javascript-lp-solver@0.4.24/prod/solver.js"></script>
    
    <!-- 2ï¸âƒ£ RealDataParserUtil_v2.js (í•„ìˆ˜! ìƒˆë¡œ ì¶”ê°€) -->
    <script src="./RealDataParserUtil_v2.js"></script>
    
    <!-- 3ï¸âƒ£ ì„œë²„ ì—°ê²° (DataParserUtil.js = App_logic_v4.1) -->
    <script src="./DataParserUtil.js"></script>
    
    <!-- 4ï¸âƒ£ íŒ¨í„´ ë¶„ì„ (RealDataParserUtil í•„ìš”) -->
    <script src="./PatternAnalyzer.js"></script>
    <script src="./SuccessAnalyzer.js"></script>
    
    <!-- 5ï¸âƒ£ í¼ì§€ íšŒê·€ -->
    <script src="./fuzzy_regression_fix.js"></script>
    
    <!-- 6ï¸âƒ£ ê¸°ë³¸ ì•± ë¡œì§ (ìºì‹œ ë²„ìŠ¤íŒ… ì¶”ê°€) -->
    <script src="./app_logic.js?v=20251109"></script>

    <!-- 7ï¸âƒ£ ë™ê¸°í™” (serverConfig í•„ìš”) -->
    <script src="./LocalStorageSyncBridge.js?v=20251109"></script>

    <!-- 8ï¸âƒ£ í†µí•© ë¡œì§ -->
    <script src="./App_logic_integration.js?v=20251109"></script>

    <!-- 9ï¸âƒ£ ìë™ ì˜ˆì¸¡ + ë™ê¸°í™” (ì œì¼ ë§ˆì§€ë§‰) -->
    <script src="./App_logic_autopredict_allleagues_v2_sync.js?v=20251109"></script>
    
    <!-- ì´ˆê¸°í™” ì½”ë“œ -->
    <script>
        console.log('âœ… ëª¨ë“  ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
        
        // ê²€ì¦
        console.log('1. DataParserUtil:', typeof DataParserUtil);
        console.log('2. serverConfig:', typeof serverConfig);
        console.log('3. patternDB:', typeof patternDB);
        console.log('4. successDB:', typeof successDB);
    </script>

    <!-- ë™ê¸°í™” UI ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (NEW) -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // ========== ë™ê¸°í™” UI ì´ë²¤íŠ¸ ==========
        
        // 1. JSON ë‹¤ìš´ë¡œë“œ
        const btnDownloadJson = document.getElementById('btn-download-json');
        if (btnDownloadJson) {
            btnDownloadJson.addEventListener('click', function() {
                console.log('ğŸ“¥ JSON ë‹¤ìš´ë¡œë“œ ì‹œì‘...');
                logSyncStatus('ğŸ”„ ë°ì´í„° ë‹¤ìš´ë¡œë“œ ì¤‘...');
                
                const result = localStorageSyncBridge.downloadAsJSON();
                if (result.success) {
                    logSyncStatus(`âœ… íŒŒì¼ ë‹¤ìš´ë¡œë“œ: ${result.filename}`, 'success');
                } else {
                    logSyncStatus(`âŒ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: ${result.error}`, 'error');
                }
            });
        }
        
        // 2. JSON ì—…ë¡œë“œ
        const btnUploadJson = document.getElementById('btn-upload-json');
        if (btnUploadJson) {
            btnUploadJson.addEventListener('click', function() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = async function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        console.log('ğŸ“¤ JSON ì—…ë¡œë“œ ì‹œì‘...', file.name);
                        logSyncStatus(`ğŸ”„ íŒŒì¼ ì—…ë¡œë“œ ì¤‘: ${file.name}`);
                        
                        try {
                            const result = await localStorageSyncBridge.uploadFromJSON(file);
                            if (result.success) {
                                logSyncStatus(`âœ… ì—…ë¡œë“œ ì™„ë£Œ: ${result.savedCount}ê°œ ë°ì´í„° ë¡œë“œë¨`, 'success');
                            } else {
                                logSyncStatus(`âŒ ì—…ë¡œë“œ ì‹¤íŒ¨: ${result.error}`, 'error');
                            }
                        } catch (err) {
                            logSyncStatus(`âŒ ì˜¤ë¥˜: ${err.error}`, 'error');
                        }
                    }
                };
                input.click();
            });
        }
        
        // 3. ì„œë²„ ë™ê¸°í™”
        const btnSyncServer = document.getElementById('btn-sync-server');
        if (btnSyncServer) {
            btnSyncServer.addEventListener('click', async function() {
                console.log('ğŸ”— ì„œë²„ ë™ê¸°í™” ì‹œì‘...');
                logSyncStatus('ğŸ”„ ì„œë²„ ë™ê¸°í™” ì¤‘...');
                this.disabled = true;
                
                const result = await localStorageSyncBridge.syncToServer();
                if (result.success) {
                    logSyncStatus(`âœ… ë™ê¸°í™” ì™„ë£Œ: ${result.time}`, 'success');
                } else {
                    logSyncStatus(`âŒ ë™ê¸°í™” ì‹¤íŒ¨: ${result.error}`, 'error');
                }
                
                this.disabled = false;
            });
        }
        
        // 4. ìë™ ë™ê¸°í™”
        let autoSyncEnabled = false;
        const btnAutoSync = document.getElementById('btn-auto-sync');
        if (btnAutoSync) {
            btnAutoSync.addEventListener('click', function() {
                autoSyncEnabled = !autoSyncEnabled;
                
                if (autoSyncEnabled) {
                    localStorageSyncBridge.startAutoSync();
                    localStorageSyncBridge.enableAutoSync();
                    btnAutoSync.style.background = '#22c55e';
                    btnAutoSync.textContent = 'â¹ï¸ ìë™ ë™ê¸°í™” ì¤‘ì§€ (5ë¶„ë§ˆë‹¤ ì‘ë™ ì¤‘)';
                    logSyncStatus('âœ… ìë™ ë™ê¸°í™” ì‹œì‘ë¨ (5ë¶„ë§ˆë‹¤)', 'success');
                } else {
                    localStorageSyncBridge.stopAutoSync();
                    btnAutoSync.style.background = '#8b5cf6';
                    btnAutoSync.textContent = 'â° ìë™ ë™ê¸°í™” ì‹œì‘ (5ë¶„ë§ˆë‹¤)';
                    logSyncStatus('â¹ï¸ ìë™ ë™ê¸°í™” ì¤‘ì§€ë¨', 'warning');
                }
            });
        }
        
        // ========== í—¬í¼ í•¨ìˆ˜ ==========
        
        function logSyncStatus(message, type = 'info') {
            const statusDiv = document.getElementById('sync-status');
            if (!statusDiv) return;
            
            const timestamp = new Date().toLocaleTimeString('ko-KR');
            
            const newLine = document.createElement('div');
            newLine.className = `sync-log-${type === 'success' ? 'success' : type === 'error' ? 'error' : type === 'warning' ? 'warning' : 'info'}`;
            newLine.style.marginTop = '4px';
            newLine.textContent = `[${timestamp}] ${message}`;
            
            statusDiv.appendChild(newLine);
            statusDiv.scrollTop = statusDiv.scrollHeight;
            
            // ìµœëŒ€ 50ê°œ ë¡œê·¸ë§Œ ìœ ì§€
            const logs = statusDiv.querySelectorAll('div');
            if (logs.length > 50) {
                logs[0].remove();
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        if (typeof localStorageSyncBridge !== 'undefined') {
            const status = localStorageSyncBridge.getStatus();
            logSyncStatus(`ğŸ“Š ì´ˆê¸°í™”: ${status.dataCount}ê°œ í•­ëª© ê°ì§€ë¨`, 'info');
            console.log('âœ… ë™ê¸°í™” UI ì´ˆê¸°í™” ì™„ë£Œ');
        }
    });
    </script>

</body>
</html>