<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FootballAi Web Predictor (ìë™ ì¬í•™ìŠµ + ë™ê¸°í™”)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Inter', 'Pretendard', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px;
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2em;
            font-weight: 700;
        }
        
        h2 {
            color: #333;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4em;
            font-weight: 600;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #555;
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        /* ì¬í•™ìŠµ íŒ¨ë„ */
        .retraining-sync-panel {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 20px;
            margin: 20px 0;
            border-radius: 12px;
            border: 3px solid #fbbf24;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .retraining-sync-panel h3 {
            margin-top: 0;
            color: #92400e;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2em;
        }
        
        /* ë²„íŠ¼ ê·¸ë¦¬ë“œ */
        .button-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 15px 0;
        }
        
        @media (max-width: 640px) {
            .button-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* ë²„íŠ¼ íƒ€ì… */
        .btn-retrain {
            background: #ef4444;
            color: white;
        }
        
        .btn-retrain:hover {
            background: #dc2626;
        }
        
        .btn-sync-api {
            background: #3b82f6;
            color: white;
        }
        
        .btn-sync-api:hover {
            background: #2563eb;
        }
        
        .btn-download {
            background: #8b5cf6;
            color: white;
        }
        
        .btn-download:hover {
            background: #7c3aed;
        }
        
        .btn-upload {
            background: #ec4899;
            color: white;
        }
        
        .btn-upload:hover {
            background: #db2777;
        }
        
        /* ë¡œê·¸ ë°•ìŠ¤ */
        .training-sync-log {
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 2px solid #fbbf24;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 180px;
            overflow-y: auto;
            margin-top: 10px;
            background-color: #fffbeb;
        }
        
        .training-sync-log div {
            margin: 4px 0;
            padding: 2px 4px;
        }
        
        .log-success { color: #059669; font-weight: bold; }
        .log-error { color: #dc2626; font-weight: bold; }
        .log-info { color: #0284c7; }
        .log-warning { color: #b45309; font-weight: bold; }
        
        /* ëª¨ë“œ ë°•ìŠ¤ */
        .model-status {
            background: #f0f9ff;
            border: 2px solid #0ea5e9;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .model-status h4 {
            margin-top: 0;
            color: #0369a1;
            font-weight: 700;
        }
        
        .model-status p {
            margin: 5px 0;
            color: #064e3b;
            font-size: 14px;
        }
        
        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            color: #666;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            margin-bottom: -2px;
        }
        
        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ì…ë ¥ í•„ë“œ */
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-family: inherit;
            font-size: 14px;
            margin: 5px 0 15px 0;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        /* ì •ë³´ ë°•ìŠ¤ */
        .info-box {
            background: #dbeafe;
            border-left: 4px solid #0284c7;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: #064e3b;
        }
        
        .success-box {
            background: #dcfce7;
            border-left: 4px solid #16a34a;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: #3d5641;
        }
        
        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: #78350f;
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div>
            <h1>âš½ FootballAi Web Predictor</h1>
            <p style="color: #666; margin-bottom: 20px; font-size: 14px;">
                ğŸ¤– ìë™ ì¬í•™ìŠµ + ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë™ê¸°í™” (api-1.htmlê³¼ ì–‘ë°©í–¥ ë°ì´í„° ê³µìœ )
            </p>
        </div>

        <!-- ğŸ§  ìë™ ì¬í•™ìŠµ + ë™ê¸°í™” íŒ¨ë„ (NEW) -->
        <section class="retraining-sync-panel">
            <h3>ğŸ¤– ìë™ ì¬í•™ìŠµ + ë™ê¸°í™” ì‹œìŠ¤í…œ</h3>
            
            <p style="color: #92400e; font-size: 13px; margin: 10px 0;">
                âœ… ë‹¨ê³„ë³„ íë¦„: í•™ìŠµ ë°ì´í„° ì—…ë¡œë“œ â†’ ìë™ ì¬í•™ìŠµ â†’ íŒ¨í„´ ë¶„ì„ â†’ ì„œë²„ ë™ê¸°í™” â†’ api-1.html ìë™ ì—…ë°ì´íŠ¸
            </p>
            
            <div class="button-grid">
                <button id="btn-trigger-retraining" class="btn-retrain">
                    ğŸ§  ìë™ ì¬í•™ìŠµ ì‹œì‘
                </button>
                <button id="btn-sync-to-api" class="btn-sync-api">
                    ğŸ“¤ api-1.htmlë¡œ ë™ê¸°í™”
                </button>
            </div>
            
            <div class="button-grid">
                <button id="btn-download-training-json" class="btn-download">
                    ğŸ“¥ í•™ìŠµ ë°ì´í„° ë‹¤ìš´ë¡œë“œ
                </button>
                <button id="btn-upload-training-json" class="btn-upload">
                    ğŸ“¤ í•™ìŠµ ë°ì´í„° ì—…ë¡œë“œ
                </button>
            </div>
            
            <div class="training-sync-log">
                <div style="color: #92400e; font-weight: bold; margin-bottom: 8px;">ğŸ“Š ì¬í•™ìŠµ & ë™ê¸°í™” ë¡œê·¸</div>
                <div id="training-sync-log-content">ìƒíƒœ: ì¤€ë¹„ ëŒ€ê¸° ì¤‘</div>
            </div>
        </section>

        <!-- ëª¨ë¸ ìƒíƒœ -->
        <div class="model-status">
            <h4>ğŸ¤– ëª¨ë¸ ìƒíƒœ</h4>
            <p>âœ… ëª¨ë¸ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤</p>
            <p>ğŸ“Š í•™ìŠµ ë°ì´í„°: <span id="training-data-count">0</span>ê°œ í•­ëª©</p>
            <p>ğŸ”„ ë§ˆì§€ë§‰ ì¬í•™ìŠµ: <span id="last-retrain-time">ì—†ìŒ</span></p>
        </div>

        <!-- íƒ­ ë©”ë‰´ -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('prediction-tab')">
                ğŸ”® ì˜ˆì¸¡ ë¶„ì„
            </button>
            <button class="tab-btn" onclick="switchTab('pattern-tab')">
                ğŸ“Š íŒ¨í„´ ë¶„ì„
            </button>
            <button class="tab-btn" onclick="switchTab('settings-tab')">
                âš™ï¸ ì„¤ì •
            </button>
        </div>

        <!-- íƒ­ 1: ì˜ˆì¸¡ ë¶„ì„ -->
        <div id="prediction-tab" class="tab-content active">
            <h2>ğŸ”® ê²½ê¸° ì˜ˆì¸¡ ë¶„ì„</h2>
            
            <div class="info-box">
                ğŸ“Œ í•™ìŠµëœ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ ê²½ê¸° ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•©ë‹ˆë‹¤.
            </div>
            
            <label>í™ˆ íŒ€ ì´ë¦„</label>
            <input type="text" id="home-team" placeholder="ì˜ˆ: Manchester City">
            
            <label>ì›ì • íŒ€ ì´ë¦„</label>
            <input type="text" id="away-team" placeholder="ì˜ˆ: Liverpool">
            
            <label>ë¦¬ê·¸</label>
            <select id="league">
                <option value="">ì„ íƒí•˜ì„¸ìš”...</option>
                <option value="premier-league">Premier League</option>
                <option value="champions-league">UEFA Champions League</option>
                <option value="la-liga">La Liga</option>
                <option value="serie-a">Serie A</option>
                <option value="ligue-1">Ligue 1</option>
            </select>
            
            <button class="btn-sync-api" style="width: 100%;">
                ğŸ”® ì˜ˆì¸¡ ë¶„ì„ ì‹¤í–‰
            </button>
            
            <div style="background: #f3f4f6; padding: 20px; border-radius: 8px; margin-top: 20px;">
                <h3>ğŸ“ˆ ì˜ˆì¸¡ ê²°ê³¼</h3>
                <p style="color: #666; text-align: center; padding: 30px;">
                    ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  ë¶„ì„ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.
                </p>
            </div>
        </div>

        <!-- íƒ­ 2: íŒ¨í„´ ë¶„ì„ -->
        <div id="pattern-tab" class="tab-content">
            <h2>ğŸ“Š íŒ¨í„´ ë¶„ì„</h2>
            
            <div class="info-box">
                ğŸ“Œ í•™ìŠµëœ ë¯¸ì ì¤‘ íŒ¨í„´ê³¼ ì„±ê³µ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.
            </div>
            
            <h3>ğŸš¨ ë¯¸ì ì¤‘ ìœ„í—˜ íŒ¨í„´</h3>
            <div style="background: #fee2e2; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <p id="warning-patterns" style="color: #7f1d1d;">ë¡œë“œ ì¤‘...</p>
            </div>
            
            <h3>âœ… ì„±ê³µ íŒ¨í„´</h3>
            <div style="background: #dcfce7; padding: 15px; border-radius: 8px;">
                <p id="success-patterns" style="color: #14532d;">ë¡œë“œ ì¤‘...</p>
            </div>
        </div>

        <!-- íƒ­ 3: ì„¤ì • -->
        <div id="settings-tab" class="tab-content">
            <h2>âš™ï¸ ì„¤ì •</h2>
            
            <div class="info-box">
                ğŸ“Œ ì‹œìŠ¤í…œ ì„¤ì • ë° ê³ ê¸‰ ì˜µì…˜ì…ë‹ˆë‹¤.
            </div>
            
            <h3>ğŸ”— ì„œë²„ ì„¤ì •</h3>
            <label>API ì„œë²„ URL</label>
            <input type="text" id="server-url" value="http://localhost:8000" placeholder="http://localhost:8000">
            
            <h3>ğŸ”„ ë™ê¸°í™” ì„¤ì •</h3>
            <label>
                <input type="checkbox" id="auto-sync-checkbox" style="width: auto; margin-right: 10px;">
                ìë™ ë™ê¸°í™” í™œì„±í™” (5ë¶„ë§ˆë‹¤)
            </label>
            
            <h3>ğŸ’¾ ë°ì´í„° ê´€ë¦¬</h3>
            <button class="btn-upload" style="width: 100%;">
                ğŸ—‘ï¸ ëª¨ë“  ë¡œì»¬ ë°ì´í„° ì‚­ì œ
            </button>
            
            <div class="warning-box">
                âš ï¸ ì£¼ì˜: ëª¨ë“  ë¡œì»¬ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ë©´ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
            </div>
        </div>

    </div>

    <!-- âœ… ì˜¬ë°”ë¥¸ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìˆœì„œ -->
    
    <!-- 1ï¸âƒ£ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://unpkg.com/javascript-lp-solver@0.4.24/prod/solver.js"></script>
    
    <!-- 2ï¸âƒ£ HTML íŒŒì‹± (í•„ìˆ˜ ì¶”ê°€!) -->
    <script src="./Realdataparserutil_v2.js"></script>
    
    <!-- 3ï¸âƒ£ ì„œë²„ ì—°ê²° -->
    <script src="./DataParserUtil.js"></script>
    
    <!-- 4ï¸âƒ£ íŒ¨í„´ ë¶„ì„ -->
    <script src="./PatternAnalyzer.js"></script>
    <script src="./SuccessAnalyzer.js"></script>
    
    <!-- 5ï¸âƒ£ í¼ì§€ íšŒê·€ (í•„ìˆ˜ ì¶”ê°€!) -->
    <script src="./fuzzy_regression_fix.js"></script>
    
    <!-- 6ï¸âƒ£ ê¸°ë³¸ ì•± ë¡œì§ -->
    <script src="./app_logic.js"></script>
    
    <!-- 7ï¸âƒ£ ë™ê¸°í™” (ìœ„ì¹˜ ë³€ê²½!) -->
    <script src="./LocalStorageSyncBridge.js"></script>
    
    <!-- 8ï¸âƒ£ í†µí•© ì›Œí¬í”Œë¡œìš° (íŒŒì¼ëª… ìˆ˜ì •!) -->
    <script src="./App_logic_integration.js"></script>
    
    <!-- 9ï¸âƒ£ ìë™ ì¬í•™ìŠµ + ë™ê¸°í™” (íŒŒì¼ëª… ìˆ˜ì •!) -->
    <script src="./App_logic_autopredict_allleagues_v2_sync.js"></script>

    <!-- ìë™ ì¬í•™ìŠµ & ë™ê¸°í™” UI ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (NEW) -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // ========== íƒ­ ì „í™˜ í•¨ìˆ˜ ==========
        window.switchTab = function(tabName) {
            // ëª¨ë“  íƒ­ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        };
        
        // ========== ì¬í•™ìŠµ ì™„ë£Œ í›„ ìë™ ë™ê¸°í™” í•¨ìˆ˜ ==========
        
        async function onRetrainingComplete() {
            logTrainingSync('ğŸ¤– ì¬í•™ìŠµ ì™„ë£Œ! - ë™ê¸°í™” ì‹œì‘...', 'info');
            
            try {
                // 1. í˜„ì¬ ë°ì´í„°ë¥¼ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
                const trainingData = {
                    patternAnalyzerDB_v4: JSON.parse(localStorage.getItem('patternAnalyzerDB_v4') || '{}'),
                    successAnalyzerDB_v1: JSON.parse(localStorage.getItem('successAnalyzerDB_v1') || '{}'),
                    modelVersion: 'retrained-' + new Date().toISOString(),
                    timestamp: new Date().toISOString()
                };
                
                // 2. localStorageì— ì €ì¥
                Object.keys(trainingData).forEach(key => {
                    localStorage.setItem(key, typeof trainingData[key] === 'string' 
                        ? trainingData[key] 
                        : JSON.stringify(trainingData[key]));
                });
                
                logTrainingSync('ğŸ’¾ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì™„ë£Œ', 'success');
                
                // 3. ì„œë²„ì— ë™ê¸°í™”
                const syncResult = await localStorageSyncBridge.syncToServer();
                
                if (syncResult.success) {
                    logTrainingSync(`âœ… ì„œë²„ ë™ê¸°í™” ì™„ë£Œ: ${syncResult.time}`, 'success');
                    updateModelStatus();
                } else {
                    logTrainingSync(`âš ï¸ ì„œë²„ ë™ê¸°í™” ë¶€ë¶„ ì‹¤íŒ¨: ${syncResult.error}`, 'warning');
                }
            } catch (err) {
                logTrainingSync(`âŒ ë™ê¸°í™” ì˜¤ë¥˜: ${err.message}`, 'error');
            }
        }
        
        // ========== UI ë²„íŠ¼ ì´ë²¤íŠ¸ ==========
        
        // 1. ìë™ ì¬í•™ìŠµ ë²„íŠ¼
        document.getElementById('btn-trigger-retraining').addEventListener('click', async function() {
            logTrainingSync('ğŸ§  ìë™ ì¬í•™ìŠµ ì‹œì‘...', 'info');
            this.disabled = true;
            
            try {
                // ê¸°ì¡´ ì¬í•™ìŠµ í•¨ìˆ˜ í˜¸ì¶œ (ìˆìœ¼ë©´)
                // await predictAllLeagues();
                
                // ì¬í•™ìŠµ ì™„ë£Œ í›„ ë™ê¸°í™”
                await onRetrainingComplete();
                
                this.style.background = '#22c55e';
                this.textContent = 'âœ… ì¬í•™ìŠµ ì™„ë£Œ!';
                
                setTimeout(() => {
                    this.disabled = false;
                    this.style.background = '#ef4444';
                    this.textContent = 'ğŸ§  ìë™ ì¬í•™ìŠµ ì‹œì‘';
                }, 2000);
            } catch (err) {
                logTrainingSync(`âŒ ì¬í•™ìŠµ ì˜¤ë¥˜: ${err.message}`, 'error');
                this.disabled = false;
            }
        });
        
        // 2. APIë¡œ ë™ê¸°í™” ë²„íŠ¼
        document.getElementById('btn-sync-to-api').addEventListener('click', async function() {
            logTrainingSync('ğŸ“¤ api-1.htmlë¡œ ë™ê¸°í™” ì¤‘...', 'info');
            this.disabled = true;
            
            const result = await localStorageSyncBridge.syncToServer();
            if (result.success) {
                logTrainingSync(`âœ… ë™ê¸°í™” ì™„ë£Œ: ${result.time}`, 'success');
            } else {
                logTrainingSync(`âŒ ë™ê¸°í™” ì‹¤íŒ¨: ${result.error}`, 'error');
            }
            
            this.disabled = false;
        });
        
        // 3. JSON ë‹¤ìš´ë¡œë“œ
        document.getElementById('btn-download-training-json').addEventListener('click', function() {
            const result = localStorageSyncBridge.downloadAsJSON();
            if (result.success) {
                logTrainingSync(`âœ… íŒŒì¼ ë‹¤ìš´ë¡œë“œ: ${result.filename}`, 'success');
            } else {
                logTrainingSync(`âŒ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: ${result.error}`, 'error');
            }
        });
        
        // 4. JSON ì—…ë¡œë“œ
        document.getElementById('btn-upload-training-json').addEventListener('click', function() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = async function(e) {
                const file = e.target.files[0];
                if (file) {
                    logTrainingSync(`ğŸ”„ íŒŒì¼ ì—…ë¡œë“œ ì¤‘: ${file.name}`, 'info');
                    try {
                        const result = await localStorageSyncBridge.uploadFromJSON(file);
                        if (result.success) {
                            logTrainingSync(`âœ… ì—…ë¡œë“œ ì™„ë£Œ: ${result.savedCount}ê°œ ë°ì´í„° ë¡œë“œë¨`, 'success');
                            updateModelStatus();
                        } else {
                            logTrainingSync(`âŒ ì—…ë¡œë“œ ì‹¤íŒ¨: ${result.error}`, 'error');
                        }
                    } catch (err) {
                        logTrainingSync(`âŒ ì˜¤ë¥˜: ${err.error}`, 'error');
                    }
                }
            };
            input.click();
        });
        
        // ========== í—¬í¼ í•¨ìˆ˜ ==========
        
        function logTrainingSync(message, type = 'info') {
            const logDiv = document.getElementById('training-sync-log-content');
            const timestamp = new Date().toLocaleTimeString('ko-KR');
            
            const newLine = document.createElement('div');
            newLine.className = `log-${type}`;
            newLine.style.marginTop = '4px';
            newLine.textContent = `[${timestamp}] ${message}`;
            
            logDiv.appendChild(newLine);
            logDiv.scrollTop = logDiv.scrollHeight;
            
            // ìµœëŒ€ 50ê°œ ë¡œê·¸ë§Œ ìœ ì§€
            const logs = logDiv.querySelectorAll('div');
            if (logs.length > 50) {
                logs[0].remove();
            }
        }
        
        function updateModelStatus() {
            try {
                const patternDB = JSON.parse(localStorage.getItem('patternAnalyzerDB_v4') || '{}');
                const successDB = JSON.parse(localStorage.getItem('successAnalyzerDB_v1') || '{}');
                
                const patternCount = Object.keys(patternDB).length;
                const successCount = Object.keys(successDB).length;
                const totalCount = patternCount + successCount;
                
                document.getElementById('training-data-count').textContent = totalCount;
                document.getElementById('last-retrain-time').textContent = new Date().toLocaleTimeString('ko-KR');
            } catch (err) {
                console.error('ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', err);
            }
        }
        
        function loadPatterns() {
            try {
                const patternDB = JSON.parse(localStorage.getItem('patternAnalyzerDB_v4') || '{}');
                const successDB = JSON.parse(localStorage.getItem('successAnalyzerDB_v1') || '{}');
                
                const warningHtml = Object.keys(patternDB).length > 0 
                    ? Object.entries(patternDB).slice(0, 5).map(([name, data]) => 
                        `<div>â€¢ ${name}: ${data.count || 0}íšŒ</div>`).join('')
                    : '<div>ì•„ì§ ë¯¸ì ì¤‘ íŒ¨í„´ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                
                const successHtml = Object.keys(successDB).length > 0
                    ? Object.entries(successDB).slice(0, 5).map(([name, data]) =>
                        `<div>â€¢ ${name}: ${data.count || 0}íšŒ</div>`).join('')
                    : '<div>ì•„ì§ ì„±ê³µ íŒ¨í„´ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                
                document.getElementById('warning-patterns').innerHTML = warningHtml;
                document.getElementById('success-patterns').innerHTML = successHtml;
            } catch (err) {
                console.error('íŒ¨í„´ ë¡œë“œ ì‹¤íŒ¨:', err);
            }
        }
        
        // ========== ì´ˆê¸°í™” ==========
        
        const status = localStorageSyncBridge.getStatus();
        logTrainingSync(`ğŸ“Š ì‹œìŠ¤í…œ ì´ˆê¸°í™”: ${status.dataCount}ê°œ í•­ëª© ê°ì§€ë¨`, 'info');
        
        updateModelStatus();
        loadPatterns();
        
        console.log('âœ… FootballAi Web Predictor ì´ˆê¸°í™” ì™„ë£Œ');
    });
    </script>

</body>
</html>